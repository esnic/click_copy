;(function($){
	var defaults={
		text:"复制成功",
		copyText:"配置错误",
		copyId:""
	};
	$.extend({
		copy:function(option){
			var options=$.extend({},defaults,option);
			var cId=options.copyId==""?'#copy':options.copyId;
			var tips = options.text ==''?defaults.text:options.text;
			var copyText;
			var flg = true;
			if(options.copyText == ''){
				copyText = defaults.copyText;
				tips = '请配置复制内容';
			}else{
				copyText = options.copyText;
			}
			if(flg){
				var u=navigator.userAgent;
				var isAndroid=u.indexOf('Android')>-1||u.indexOf('Adr')>-1;
				var isiOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
				var aEle=document.querySelectorAll(cId);
				if(isAndroid||(!isAndroid&&!isiOS)){
					$(aEle).each(function(){
						var index=$(this).attr("id").split("y")[1];
						$('body').append('<textarea id="selector'+index+'" style="position:absolute;top:-9999px;left:-9999px;" readonly>'+copyText+'</textarea>');
						$(this)[0].onclick=function(event){
							$("#selector"+index).select();
							document.execCommand("copy",false,null);
							layer.msg(tips,{shift:0,time:1000},function(){
								meteor.track("wechat", {convert_id: "1645545448741899"});
							});
							
						}
					})
				}
				if(isiOS){
					$(aEle).each(function(){
						var index=$(this).attr("id").split("y")[1];
						$('body').append('<a id="selector'+index+'" style="position:absolute;top:-9999px;left:-9999px;">'+copyText+'</a>');
						this.addEventListener('click',function(){
							var copyDOM=document.querySelectorAll('#selector'+index);
							var range=document.createRange();
							range.selectNode(copyDOM[0]);
							window.getSelection().removeAllRanges();
							window.getSelection().addRange(range);
							document.execCommand('copy');							
							layer.msg(tips,{shift:0,time:1000},function(){
								meteor.track("wechat", {convert_id: "1645545448741899"});
							});
							
						},false)
					})
				}
			}			
		}
	})
})(jQuery);